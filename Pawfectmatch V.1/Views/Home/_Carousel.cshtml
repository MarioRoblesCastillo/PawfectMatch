@using Pawfectmatch_V._1.Models
@{
    var pets = ViewBag.FeaturedPets as List<Pet>;
    int itemsPerSlide = 4;
    int totalSlides = (int)Math.Ceiling((double)(pets?.Count ?? 0) / itemsPerSlide);
}

<div class="container adoption-section">
    <h2>PETS AVAILABLE FOR ADOPTION</h2>
    <p>They Are Waiting for Your Adoption</p>

    <div id="carouselPets" class="carousel slide multi-carousel" data-bs-ride="carousel" aria-label="Featured pets carousel">
        <div class="carousel-inner multi-carousel-inner">

            @if (pets != null && pets.Count > 0)
            {
                for (int slide = 0; slide < totalSlides; slide++)
                {
                    var slidePets = pets.Skip(slide * itemsPerSlide).Take(itemsPerSlide).ToList();
                    <div class="carousel-item @(slide == 0 ? "active" : "")">
                        <div class="row">
                            @foreach (var pet in slidePets)
                            {
                                <div class="col-md-3 multi-carousel-item">
                                    <div class="pet-card">
                                        <img src="@(pet.ImagePath ?? "/images/default.jpg")" alt="Photo of @pet.Name the @pet.PetType" class="img-fluid" />
                                        <h5>@pet.PetType</h5>
                                        <p class="text-muted">@pet.Name</p>
                                        <button type="button" class="btn btn-sm view-pet-btn"
                                                data-bs-toggle="modal" data-bs-target="#petDetailsModal"
                                                data-pet-id="@pet.Id"
                                                data-pet-name="@pet.Name"
                                                data-pet-breed="@pet.Breed"
                                                data-pet-age="@pet.Age"
                                                data-pet-gender="@pet.Gender"
                                                aria-label="View details for @pet.Name the @pet.PetType">
                                            View Pet
                                        </button>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="carousel-item active">
                    <div class="col-12">
                        <p>No pets available for adoption at this time.</p>
                    </div>
                </div>
            }

        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#carouselPets" data-bs-slide="prev" aria-label="Previous pets">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselPets" data-bs-slide="next" aria-label="Next pets">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <div class="see-more-btn-container">
        <button class="see-more-btn" onclick="window.location.href='/Pets/Index'">
            See More Pets for Adoption
        </button>
    </div>
</div>
